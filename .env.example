# =============================================================================
# research-mind-service Environment Configuration
# =============================================================================
# Copy this file to .env and customize for your environment.
# NEVER commit .env to version control.

# --- Server ---
SERVICE_ENV=development
HOST=0.0.0.0
PORT=15010
DEBUG=false

# --- Logging ---
# Controls the verbosity of application logs.
# Valid levels: DEBUG, INFO, WARNING, ERROR, CRITICAL
# DEBUG: Most verbose - includes all debug messages
# INFO: Standard operational messages (default)
# WARNING: Potential issues that don't prevent operation
# ERROR: Errors that affect specific operations
# CRITICAL: Severe errors that may crash the application
LOG_LEVEL=INFO

# --- Database ---
# Use postgresql+psycopg:// dialect (psycopg v3 driver)
# For psycopg2, use: postgresql+psycopg2://
DATABASE_URL=postgresql+psycopg://postgres:password@localhost:5432/research_mind

# --- Content Sandbox ---
# Root directory for all session data (content and indexes)
# Each session gets: {content_sandbox_root}/{session_id}/
#   - Content subdirs: {content_id_1}/, {content_id_2}/, etc.
#   - Index data: .mcp-vector-search/
# Development: ./content_sandboxes (relative to service root)
# Production: /var/lib/research-mind/content_sandboxes
CONTENT_SANDBOX_ROOT=./content_sandboxes

# --- Content Retrieval Limits ---
MAX_UPLOAD_BYTES=52428800
MAX_TEXT_BYTES=10485760
MAX_URL_RESPONSE_BYTES=20971520
MAX_WORKSPACE_BYTES=524288000
URL_FETCH_TIMEOUT=30
GIT_CLONE_TIMEOUT=120
GIT_CLONE_DEPTH=1
ALLOWED_UPLOAD_EXTENSIONS=.pdf,.docx,.txt,.md,.csv,.html,.json,.xml

# --- Subprocess Timeouts (seconds) ---
SUBPROCESS_TIMEOUT_INIT=30
SUBPROCESS_TIMEOUT_INDEX=60
SUBPROCESS_TIMEOUT_LARGE=600

# --- Session Limits ---
SESSION_MAX_DURATION_MINUTES=60
SESSION_IDLE_TIMEOUT_MINUTES=30

# --- CORS ---
# JSON list of allowed origins
CORS_ORIGINS=["http://localhost:15000","http://localhost:3000"]

# --- Feature Flags ---
ENABLE_AGENT_INTEGRATION=false
ENABLE_CACHING=false
ENABLE_WARM_POOLS=false

# --- Security ---
PATH_VALIDATOR_ENABLED=true
AUDIT_LOGGING_ENABLED=true

# --- Auth (stubs - configure for production) ---
SECRET_KEY=dev-secret-change-in-production
ALGORITHM=HS256

# --- mcp-vector-search Model Caching ---
HF_HOME=${HOME}/.cache/huggingface
TRANSFORMERS_CACHE=${HF_HOME}/transformers
HF_HUB_CACHE=${HF_HOME}/hub

# --- Vector Search ---
VECTOR_SEARCH_ENABLED=true
VECTOR_SEARCH_MODEL=all-MiniLM-L6-v2
